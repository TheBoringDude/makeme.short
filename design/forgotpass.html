<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | makeme.short</title>
    <link rel="stylesheet" type="text/css" href="./build.css">
    <link rel="stylesheet" type="text/css" href="./style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/js/all.min.js" defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body class="antialiased bg-midnight-green">
    <div class="w-5/6 mx-auto">
        <div class="text-center pt-8">
            <h1 class="text-med-turq tracking-wider text-lg font-bold">makeme.short</h1>
        </div>
        <!-- main form -->
        <div class="w-11/12 sm:w-5/6 md:w-2/3 lg:w-1/2 xl:w-2/5 pt-4 sm:pt-6 lg:pt-8 mx-auto" x-data="{ formTab: 'login' }">
            <div class="mb-4 bg-red-600 px-3 py-2 rounded text-center">
                <p class="font-light tracking-wider text-white text-sm">Incorrect Username / Password!</p>
            </div>
            
            <div class="p-4 sm:px-5 md:px-8 rounded-b bg-white">
                <!-- forgot pass form -->
                <div id="forgotpassForm">
                    <h3 class="text-center text-midnight-green undeline text-lg pb-1 px-4">Forgot Your Password?</h3>
                    <form action="#" method="post" id="forgotpass-form">
                        <div class="flex flex-col py-1">
                            <label class="font-light">Email Address: </label>
                            <div class="relative flex flex-row items-center">
                                <input id="reset-email" class="w-full font-light tracking-wide pl-3 pr-8 py-2 bg-gray-300 rounded focus:outline-none border-2 focus:border-med-turq text-sm" type="email" name="register-email" placeholder="Enter your account email address">
                                <i id="icCheck" class="fas fa-check-circle text-med-turq absolute top-0 right-0 text-lg my-3 mr-2 invisible"></i>
                                <i id="icError" class="fas fa-exclamation-circle text-red-600 absolute top-0 right-0 text-lg my-3 mr-2 invisible"></i>
                            </div>
                            <!-- error -->
                            <div id="error" class="pt-1 hidden">
                                <p class="font-light text-xs sm:text-sm text-red-600">Invalid email address!</p>
                            </div>
                        </div>
                        <div class="py-2">
                            <input id="btn-forgotpass" type="submit" value="Send Request" class="px-6 py-2 uppercase text-sm tracking-wide bg-midnight-green text-mint-cream opacity-75 cursor-not-allowed">
                        </div>
                        <div class="mt-1">
                            <a href="#" class="text-sm font-light hover:text-midnight-green hover:underline">Already have an account?</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        const inputresetemail = document.getElementById('reset-email');
        const btnresetemail = document.getElementById('btn-forgotpass');

        inputresetemail.oninput = function(){
            if (inputresetemail.value.length > 0){
                if (validateEmail(inputresetemail.value)){
                    document.getElementById('icCheck').classList.remove('invisible');
                    document.getElementById('icError').classList.add('invisible');
                    document.getElementById('error').classList.add('hidden');
                    btnresetemail.disabled = false;
                    btnresetemail.classList.remove('cursor-not-allowed');
                    btnresetemail.classList.remove('opacity-75');
                    btnresetemail.classList.add('cursor-pointer');
                    btnresetemail.classList.add('hover:bg-med-turq');
                }else{
                    document.getElementById('icCheck').classList.add('invisible');
                    document.getElementById('icError').classList.remove('invisible');
                    document.getElementById('error').classList.remove('hidden');
                    btnresetemail.disabled = true;
                    btnresetemail.classList.add('cursor-not-allowed');
                    btnresetemail.classList.add('opacity-75');
                    btnresetemail.classList.remove('cursor-pointer');
                    btnresetemail.classList.remove('hover:bg-med-turq');
                }
            }else{
                document.getElementById('icCheck').classList.add('invisible');
                document.getElementById('icError').classList.remove('invisible');
                document.getElementById('error').classList.remove('hidden');
                btnresetemail.disabled = true;
                btnresetemail.classList.add('cursor-not-allowed');
                btnresetemail.classList.add('opacity-75');
                btnresetemail.classList.remove('cursor-pointer');
                btnresetemail.classList.remove('hover:bg-med-turq');
            }
        }

        window.onload = function(){
            btnresetemail.disabled = true;
        }

        function validateEmail(email){
            const mailFormat = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            if (mailFormat.test(email)){
                return true;
            }
            
            return false;
        }
    </script>
</body>
</html>