<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | makeme.short</title>
    <link rel="stylesheet" type="text/css" href="./build.css">
    <link rel="stylesheet" type="text/css" href="./style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/js/all.min.js" defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body class="antialiased bg-midnight-green">
    <div class="w-5/6 mx-auto">
        <div class="text-center pt-8">
            <h1 class="text-med-turq tracking-wider text-lg font-bold">makeme.short</h1>
        </div>
        <!-- main form -->
        <div class="w-11/12 sm:w-5/6 md:w-2/3 lg:w-1/2 xl:w-2/5 pt-4 sm:pt-6 lg:pt-8 mx-auto" x-data="{ formTab: 'login' }">
            <div class="mb-4 bg-red-600 px-3 py-2 rounded text-center">
                <p class="font-light tracking-wider text-white text-sm">Incorrect Username / Password!</p>
            </div>
            
            <div class="p-4 sm:px-5 md:px-8 rounded-b bg-white">
                <!-- forgot pass form -->
                <div id="forgotpassForm">
                    <h3 class="text-center text-midnight-green undeline text-lg pb-1 px-4">Forgot Your Password?</h3>
                    <form action="#" method="post" id="forgotpass-form">
                        <div class="flex flex-col py-1">
                            <label class="font-light">New Password: </label>
                            <div class="relative flex flex-row items-center">
                                <input id="enter-new-password" class="w-full font-light tracking-wide px-3 py-2 bg-gray-300 rounded focus:outline-none border-2 focus:border-med-turq text-sm" type="password" name="register-password" placeholder="Enter your password">
                                <i id="icCheck" class="fas fa-check-circle text-med-turq absolute top-0 right-0 text-lg my-3 mr-2 invisible"></i>
                                <i id="icError" class="fas fa-exclamation-circle text-red-600 absolute top-0 right-0 text-lg my-3 mr-2 invisible"></i>
                            </div>
                            <!-- error -->
                            <div class="pt-1 hidden error">
                                <p class="font-light text-xs sm:text-sm text-red-600">Password cannot be blank!</p>
                            </div>
                        </div>
                        <div class="flex flex-col py-1">
                            <label class="font-light">Confirm New Password: </label>
                            <div class="relative flex flex-row items-center">
                                <input id="enter-confirm-new-password" class="w-full font-light tracking-wide px-3 py-2 bg-gray-300 rounded focus:outline-none border-2 focus:border-med-turq text-sm" type="password" name="register-confirm-password" placeholder="Confirm your password">
                                <i id="icCheck" class="fas fa-check-circle text-med-turq absolute top-0 right-0 text-lg my-3 mr-2 invisible"></i>
                                <i id="icError" class="fas fa-exclamation-circle text-red-600 absolute top-0 right-0 text-lg my-3 mr-2 invisible"></i>
                            </div>
                            <!-- error -->
                            <div class="pt-1 hidden error">
                                <p class="font-light text-xs sm:text-sm text-red-600">Password cannot be blank!</p>
                            </div>
                        </div>
                        <div class="py-2">
                            <input id="btnUp-newpass" type="submit" value="Send Request" class="px-6 py-2 uppercase text-sm tracking-wide bg-midnight-green text-mint-cream opacity-75 cursor-not-allowed">
                        </div>
                        <div class="mt-1">
                            <a href="#" class="text-sm font-light hover:text-midnight-green hover:underline">Already have an account?</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        const btnUpPassword = document.getElementById('btnUp-newpass');
        const inputPassword = document.getElementById('enter-new-password');
        const inputConPassword = document.getElementById('enter-confirm-new-password');

        // form validaation styles
        const disableBtnForm = ['opacity-75', 'cursor-not-allowed'];
        const enabledBtnForm = ['opacity-100', 'cursor-pointer', 'hover:bg-med-turq'];


        inputPassword.oninput = function(){
            if ((inputPassword.value.length > 7) && (inputPassword.value.length != 0)){
                showValid(inputPassword);
                if ((inputPassword.value.length > 7) && (inputConPassword.value == inputPassword.value)){
                    btnUpPassword.disabled = false;
                    btnUpPassword.classList.remove(...disableBtnForm);
                    btnUpPassword.classList.add(...enabledBtnForm);
                }
                else{
                    btnUpPassword.disabled = true;
                    btnUpPassword.classList.add(...disableBtnForm);
                    btnUpPassword.classList.remove(...enabledBtnForm);
                }
            }
            else{
                showError(inputPassword, 'Password is too short!')
            }
        }
        inputConPassword.oninput = function(){
            if ((inputConPassword.value == inputPassword.value) && (inputConPassword.value.length > 7)){
                showValid(inputConPassword);
                if ((inputPassword.value.length > 7) && (inputConPassword.value == inputPassword.value)){
                    btnUpPassword.disabled = false;
                    btnUpPassword.classList.remove(...disableBtnForm);
                    btnUpPassword.classList.add(...enabledBtnForm);
                }
                else{
                    btnUpPassword.disabled = true;
                    btnUpPassword.classList.add(...disableBtnForm);
                    btnUpPassword.classList.remove(...enabledBtnForm);
                }
            }
            else{
                showError(inputConPassword, 'Passwords are not equal!')
            }
        }

        function showError(tb, errMessage){
            const inputContainer = (tb.parentElement).parentElement;
            const errorContainer = inputContainer.querySelector('.error');
            const errMsgContainer = inputContainer.querySelector('p');
            const errIcon = inputContainer.querySelector('#icError');
            const valIcon = inputContainer.querySelector('#icCheck');
            
            tb.classList.add('border-red-600');
            tb.classList.remove('border-med-turq');
            errorContainer.classList.remove('hidden'); // show the error
            errMsgContainer.innerText = errMessage; // replace error message
            errIcon.classList.remove('invisible'); // show error icon
            valIcon.classList.add('invisible'); // hide the check icon
        }
        function showValid(tb){
            const inputContainer = (tb.parentElement).parentElement;
            const errorContainer = inputContainer.querySelector('.error');
            const errIcon = inputContainer.querySelector('#icError');
            const valIcon = inputContainer.querySelector('#icCheck');
            
            tb.classList.remove('border-red-600');
            tb.classList.add('border-med-turq');
            errorContainer.classList.add('hidden'); // hide the error
            errIcon.classList.add('invisible'); // hide error icon
            valIcon.classList.remove('invisible'); // show the check icon
        }

        window.onload = function(){
            btnUpPassword.disabled = true;
        }
    </script>
</body>
</html>